---
layout: post
title: Embedded Systems Part 4 - Interacting with the Analog World
categories: misc
---

Embedded systems are digital. However, the world around us is not made of 1's and 0's. The world we live in is analog. The things we perceive are analog. So no matter how advanced processors can get, they will always need an interface to bridge the gap between the analog world and the digital domain. These interfaces are known as Digital-to-Analog Converters (DACs) and Analog-to-Digital Converters (ADCs). 

# DACs
DACs convert a sequence of bits to an analog voltage. It takes the binary number and convert it to a voltage that is proportional to the binary number. By feeding a DAC with many binary numbers in quick succession we can generate an analog waveform.

The longer the binary number, the higher the resolution of the DAC. This is because more bits translate to more possible output values and hence smaller step sizes with each increment of the binary number. An n-bit DAC will have 2<sup>n</sup> possible outputs. So for example, an 4-bit DAC will have 2<sup>4</sup> or 16 possible outputs. 

The range of the output voltage is determined by V<sub>ref</sub> or the reference voltage of the DAC. V<sub>ref</sub> is generally the logic HIGH voltage of the MCU, which is usually 3.3V or 5V. So for a 3.3V logic level, the DAC output is between 0V to 3.3V. 

The full-scale voltage V<sub>FS</sub> of a DAC is the maximum output voltage, which is achieved when the largest binary number is applied. For a 4-bit DAC, this number is 1111. In general:

<center> V<sub>FS</sub> = (2<sup>n</sup>-1/2<sup>n</sup>) * V<sub>ref</sub> </center>

So assuming a V<sub>ref</sub> of 3.3V, the maximum output voltage is about 3.09V. 

## Types of DACs
There are many, many types of DACs out there and to keep this post short and simple, I'll only talk about two common types of DACs (there's plenty of material online if you'd like to learn more). 

First is the binary-weighted DAC. 

<p align="center">
  <img src="/assets/binary_weighted_dac.png">
</p>

The binary-weighted DAC makes clever use of a summing amplifier to perform the digital to analog conversion. Recall that the output voltage of a summing amplifier is given by: 

$$ V_{out} = -(\frac{R_F}{R_1} \times V_{IN1} + \frac{R_F}{R_2} \times V_{IN2} + .... \frac{R_F}{R_n} \times V_{INn}) $$
where n is the number of inputs to the summing amplifier